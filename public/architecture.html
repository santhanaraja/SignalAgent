<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SignalAgent â€” Architecture Diagram</title>
<style>
  :root {
    --bg: #0d1117; --surface: #161b22; --surface2: #21262d; --border: #30363d;
    --text: #e6edf3; --dim: #8b949e; --green: #3fb950; --red: #f85149;
    --yellow: #d29922; --blue: #58a6ff; --purple: #bc8cff; --orange: #f0883e;
    --cyan: #39d2c0; --pink: #f778ba;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }

  .page { max-width: 1200px; margin: 0 auto; padding: 40px 28px; }
  h1 { font-size: 28px; font-weight: 700; margin-bottom: 8px; }
  h1 span { color: var(--blue); }
  .subtitle { color: var(--dim); font-size: 14px; margin-bottom: 40px; }

  /* Architecture SVG */
  svg { width: 100%; height: auto; display: block; margin-bottom: 40px; }
  svg text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }

  /* Legend */
  .legend { display: flex; flex-wrap: wrap; gap: 24px; padding: 20px; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; margin-bottom: 32px; }
  .legend-item { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--dim); }
  .legend-color { width: 14px; height: 14px; border-radius: 3px; }

  /* Component cards */
  .components { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 16px; margin-top: 32px; }
  .comp { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 20px; }
  .comp h3 { font-size: 14px; font-weight: 700; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
  .comp h3 .icon { width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #fff; }
  .comp p { font-size: 12px; color: var(--dim); line-height: 1.7; }
  .comp .file { font-family: 'SF Mono', 'Fira Code', monospace; font-size: 11px; color: var(--cyan); margin-top: 8px; padding: 4px 8px; background: var(--surface2); border-radius: 4px; display: inline-block; }
  .comp .tech { margin-top: 8px; display: flex; gap: 6px; flex-wrap: wrap; }
  .comp .tag { font-size: 10px; padding: 2px 8px; border-radius: 10px; background: var(--surface2); color: var(--dim); border: 1px solid var(--border); }

  .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 32px 0; }
  .stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 16px; text-align: center; }
  .stat-card .num { font-size: 28px; font-weight: 700; color: var(--blue); }
  .stat-card .label { font-size: 11px; color: var(--dim); margin-top: 4px; text-transform: uppercase; letter-spacing: .5px; }

  .nav { padding: 12px 0; display: flex; gap: 8px; margin-bottom: 20px; }
  .nav a { padding: 6px 14px; border-radius: 6px; font-size: 13px; font-weight: 500; color: var(--dim); background: var(--surface2); border: 1px solid var(--border); text-decoration: none; transition: .15s; }
  .nav a:hover { border-color: var(--blue); color: var(--text); }

  @media(max-width:768px) { .stats { grid-template-columns: 1fr 1fr; } .page { padding: 20px 14px; } }
</style>
</head>
<body>
<div class="page">

<div class="nav">
  <a href="index.html">Dashboard</a>
  <a href="search.html">Ticker Search</a>
  <a href="history.html">History</a>
  <a href="architecture.html" class="active">Architecture</a>
</div>

<h1><span>SignalAgent</span> Architecture</h1>
<p class="subtitle">Live market signal pipeline for GICS sub-industry group tracking â€” 12 groups, 73 tickers, 15-min refresh cycle</p>

<div class="stats">
  <div class="stat-card"><div class="num">12</div><div class="label">GICS Sub-Industries</div></div>
  <div class="stat-card"><div class="num">73</div><div class="label">Unique Tickers</div></div>
  <div class="stat-card"><div class="num">6</div><div class="label">Macro Proxies</div></div>
  <div class="stat-card"><div class="num">5</div><div class="label">Core Modules</div></div>
</div>

<!-- Architecture Diagram -->
<svg viewBox="0 0 1140 820" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#8b949e"/>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#58a6ff"/>
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#3fb950"/>
    </marker>
    <filter id="glow"><feGaussianBlur stdDeviation="2" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
  </defs>

  <!-- Background grid -->
  <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
    <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#21262d" stroke-width="0.5"/>
  </pattern>
  <rect width="1140" height="820" fill="url(#grid)" rx="12"/>
  <rect width="1140" height="820" fill="none" stroke="#30363d" stroke-width="1" rx="12"/>

  <!-- Title -->
  <text x="570" y="36" text-anchor="middle" font-size="16" font-weight="700" fill="#e6edf3">SignalAgent Pipeline Architecture</text>

  <!-- ========== LAYER 1: DATA SOURCES (top) ========== -->
  <text x="40" y="75" font-size="10" fill="#8b949e" font-weight="600" letter-spacing="1">DATA SOURCES</text>

  <!-- Yahoo Finance API -->
  <rect x="40" y="88" width="200" height="70" rx="8" fill="#161b22" stroke="#f0883e" stroke-width="1.5"/>
  <text x="140" y="112" text-anchor="middle" font-size="11" font-weight="700" fill="#f0883e">Yahoo Finance API</text>
  <text x="140" y="128" text-anchor="middle" font-size="9" fill="#8b949e">yfinance / REST fallback</text>
  <text x="140" y="142" text-anchor="middle" font-size="9" fill="#8b949e">OHLCV + Fundamentals</text>

  <!-- Tickers -->
  <rect x="280" y="88" width="200" height="70" rx="8" fill="#161b22" stroke="#bc8cff" stroke-width="1.5"/>
  <text x="380" y="112" text-anchor="middle" font-size="11" font-weight="700" fill="#bc8cff">73 Stock Tickers</text>
  <text x="380" y="128" text-anchor="middle" font-size="9" fill="#8b949e">12 GICS Sub-Industries</text>
  <text x="380" y="142" text-anchor="middle" font-size="9" fill="#8b949e">SNDK STX MU ASML NEM FCX ...</text>

  <!-- Macro Proxies -->
  <rect x="520" y="88" width="200" height="70" rx="8" fill="#161b22" stroke="#d29922" stroke-width="1.5"/>
  <text x="620" y="112" text-anchor="middle" font-size="11" font-weight="700" fill="#d29922">6 Macro Proxies</text>
  <text x="620" y="128" text-anchor="middle" font-size="9" fill="#8b949e">^GSPC  GLD  UUP</text>
  <text x="620" y="142" text-anchor="middle" font-size="9" fill="#8b949e">USO  UNG  XLE</text>

  <!-- S&P 500 Benchmark -->
  <rect x="760" y="88" width="170" height="70" rx="8" fill="#161b22" stroke="#3fb950" stroke-width="1.5"/>
  <text x="845" y="112" text-anchor="middle" font-size="11" font-weight="700" fill="#3fb950">S&P 500 Benchmark</text>
  <text x="845" y="128" text-anchor="middle" font-size="9" fill="#8b949e">^GSPC YTD Return</text>
  <text x="845" y="142" text-anchor="middle" font-size="9" fill="#8b949e">Beat / Lag comparison</text>

  <!-- Fundamentals -->
  <rect x="970" y="88" width="140" height="70" rx="8" fill="#161b22" stroke="#f778ba" stroke-width="1.5"/>
  <text x="1040" y="112" text-anchor="middle" font-size="11" font-weight="700" fill="#f778ba">Fundamentals</text>
  <text x="1040" y="128" text-anchor="middle" font-size="9" fill="#8b949e">P/E, EPS, Margins</text>
  <text x="1040" y="142" text-anchor="middle" font-size="9" fill="#8b949e">Beta, Short %, Target</text>

  <!-- Arrows down from sources -->
  <line x1="140" y1="158" x2="140" y2="200" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="380" y1="158" x2="380" y2="200" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="620" y1="158" x2="620" y2="200" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="845" y1="158" x2="750" y2="200" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="1040" y1="158" x2="860" y2="200" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- ========== LAYER 2: SIGNAL ENGINE (center) ========== -->
  <text x="40" y="195" font-size="10" fill="#8b949e" font-weight="600" letter-spacing="1">SIGNAL ENGINE</text>

  <!-- Main engine box -->
  <rect x="40" y="205" width="1060" height="200" rx="10" fill="#161b22" stroke="#58a6ff" stroke-width="2"/>
  <text x="570" y="228" text-anchor="middle" font-size="13" font-weight="700" fill="#58a6ff">signal_engine.py</text>

  <!-- Sub-modules inside engine -->
  <!-- Price Data Fetcher -->
  <rect x="60" y="244" width="180" height="60" rx="6" fill="#21262d" stroke="#f0883e" stroke-width="1"/>
  <text x="150" y="266" text-anchor="middle" font-size="10" font-weight="600" fill="#f0883e">Data Fetcher</text>
  <text x="150" y="280" text-anchor="middle" font-size="8" fill="#8b949e">fetch_data()</text>
  <text x="150" y="292" text-anchor="middle" font-size="8" fill="#8b949e">yfinance / API fallback</text>

  <!-- Technical Indicators -->
  <rect x="260" y="244" width="180" height="60" rx="6" fill="#21262d" stroke="#58a6ff" stroke-width="1"/>
  <text x="350" y="266" text-anchor="middle" font-size="10" font-weight="600" fill="#58a6ff">Technical Indicators</text>
  <text x="350" y="280" text-anchor="middle" font-size="8" fill="#8b949e">RSI(14) Â· MACD(12,26,9)</text>
  <text x="350" y="292" text-anchor="middle" font-size="8" fill="#8b949e">MA20 Â· MA50 Â· MA200</text>

  <!-- Momentum Engine -->
  <rect x="460" y="244" width="180" height="60" rx="6" fill="#21262d" stroke="#3fb950" stroke-width="1"/>
  <text x="550" y="266" text-anchor="middle" font-size="10" font-weight="600" fill="#3fb950">Momentum Engine</text>
  <text x="550" y="280" text-anchor="middle" font-size="8" fill="#8b949e">1M/3M returns Â· 52W Hi/Lo</text>
  <text x="550" y="292" text-anchor="middle" font-size="8" fill="#8b949e">RS vs MA50 Â· Trend Strength</text>

  <!-- Fundamentals Fetcher -->
  <rect x="660" y="244" width="180" height="60" rx="6" fill="#21262d" stroke="#f778ba" stroke-width="1"/>
  <text x="750" y="266" text-anchor="middle" font-size="10" font-weight="600" fill="#f778ba">Fundamentals</text>
  <text x="750" y="280" text-anchor="middle" font-size="8" fill="#8b949e">Mkt Cap Â· P/E Â· EPS</text>
  <text x="750" y="292" text-anchor="middle" font-size="8" fill="#8b949e">Margins Â· Beta Â· Analyst</text>

  <!-- Thesis Breaker Monitor -->
  <rect x="860" y="244" width="220" height="60" rx="6" fill="#21262d" stroke="#f85149" stroke-width="1"/>
  <text x="970" y="266" text-anchor="middle" font-size="10" font-weight="600" fill="#f85149">Thesis Breaker Monitor</text>
  <text x="970" y="280" text-anchor="middle" font-size="8" fill="#8b949e">check_thesis_breakers()</text>
  <text x="970" y="292" text-anchor="middle" font-size="8" fill="#8b949e">Macro proxies â†’ condition checks</text>

  <!-- Scoring Engine -->
  <rect x="60" y="320" width="440" height="60" rx="6" fill="#21262d" stroke="#d29922" stroke-width="1"/>
  <text x="280" y="342" text-anchor="middle" font-size="10" font-weight="600" fill="#d29922">Composite Scoring Engine (0-100)</text>
  <text x="280" y="356" text-anchor="middle" font-size="8" fill="#8b949e">RSI weight + MACD weight + MA alignment + YTD momentum + Volume â†’ score_stock()</text>
  <text x="280" y="368" text-anchor="middle" font-size="8" fill="#8b949e">Score â‰¥75: STRONG BUY Â· â‰¥60: BUY Â· â‰¥45: HOLD Â· â‰¥30: SELL Â· &lt;30: STRONG SELL</text>

  <!-- GICS Classifier -->
  <rect x="520" y="320" width="280" height="60" rx="6" fill="#21262d" stroke="#bc8cff" stroke-width="1"/>
  <text x="660" y="342" text-anchor="middle" font-size="10" font-weight="600" fill="#bc8cff">GICS Sub-Industry Classifier</text>
  <text x="660" y="356" text-anchor="middle" font-size="8" fill="#8b949e">12 groups Â· Sector Â· Industry Group Â· GICS Code</text>
  <text x="660" y="368" text-anchor="middle" font-size="8" fill="#8b949e">Group signal = avg(stock scores) â†’ ranked by avg YTD</text>

  <!-- Breaker Status -->
  <rect x="820" y="320" width="260" height="60" rx="6" fill="#21262d" stroke="#f85149" stroke-width="1"/>
  <text x="950" y="342" text-anchor="middle" font-size="10" font-weight="600" fill="#f85149">Breaker Status per Group</text>
  <text x="950" y="356" text-anchor="middle" font-size="8" fill="#f85149">ðŸ”´ CRITICAL  ðŸŸ  WARNING</text>
  <text x="950" y="368" text-anchor="middle" font-size="8" fill="#f85149">ðŸŸ¡ WATCH  ðŸŸ¢ CLEAR</text>

  <!-- Arrow: Engine â†’ JSON output -->
  <line x1="570" y1="405" x2="570" y2="445" stroke="#58a6ff" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- ========== LAYER 3: DATA STORE ========== -->
  <text x="40" y="440" font-size="10" fill="#8b949e" font-weight="600" letter-spacing="1">DATA STORE</text>

  <!-- signals.json -->
  <rect x="340" y="450" width="200" height="65" rx="8" fill="#161b22" stroke="#58a6ff" stroke-width="1.5"/>
  <text x="440" y="472" text-anchor="middle" font-size="11" font-weight="700" fill="#58a6ff">signals.json</text>
  <text x="440" y="488" text-anchor="middle" font-size="9" fill="#8b949e">Groups + Stocks + Fundamentals</text>
  <text x="440" y="500" text-anchor="middle" font-size="9" fill="#8b949e">Momentum + Breaker Alerts</text>

  <!-- Arrow: signals.json â†’ history manager -->
  <line x1="540" y1="482" x2="640" y2="482" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- History Manager -->
  <rect x="640" y="450" width="220" height="65" rx="8" fill="#161b22" stroke="#39d2c0" stroke-width="1.5"/>
  <text x="750" y="472" text-anchor="middle" font-size="11" font-weight="700" fill="#39d2c0">history_manager.py</text>
  <text x="750" y="488" text-anchor="middle" font-size="9" fill="#8b949e">Diff detection Â· Snapshots</text>
  <text x="750" y="500" text-anchor="middle" font-size="9" fill="#8b949e">Signal/Group/Ticker changes</text>

  <!-- Arrow: history â†’ history.json -->
  <line x1="750" y1="515" x2="750" y2="555" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>
  <!-- Arrow: history â†’ snapshots -->
  <line x1="860" y1="515" x2="960" y2="555" stroke="#8b949e" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- history.json -->
  <rect x="640" y="555" width="200" height="55" rx="8" fill="#161b22" stroke="#39d2c0" stroke-width="1.5"/>
  <text x="740" y="577" text-anchor="middle" font-size="11" font-weight="700" fill="#39d2c0">history.json</text>
  <text x="740" y="593" text-anchor="middle" font-size="9" fill="#8b949e">Change log + Snapshot index</text>

  <!-- Snapshots dir -->
  <rect x="880" y="555" width="200" height="55" rx="8" fill="#161b22" stroke="#39d2c0" stroke-width="1.5"/>
  <text x="980" y="577" text-anchor="middle" font-size="11" font-weight="700" fill="#39d2c0">snapshots/</text>
  <text x="980" y="593" text-anchor="middle" font-size="9" fill="#8b949e">Timestamped full-state JSON</text>

  <!-- Arrow: signals.json â†’ dashboard (down) -->
  <line x1="440" y1="515" x2="440" y2="555" stroke="#58a6ff" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- public/ signals.json copy -->
  <rect x="340" y="555" width="200" height="55" rx="8" fill="#161b22" stroke="#58a6ff" stroke-width="1.5"/>
  <text x="440" y="577" text-anchor="middle" font-size="11" font-weight="700" fill="#58a6ff">public/signals.json</text>
  <text x="440" y="593" text-anchor="middle" font-size="9" fill="#8b949e">Copied for web serving</text>

  <!-- Arrow down to dashboard layer -->
  <line x1="440" y1="610" x2="440" y2="650" stroke="#58a6ff" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <line x1="740" y1="610" x2="640" y2="650" stroke="#39d2c0" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- ========== LAYER 4: PRESENTATION (Dashboard) ========== -->
  <text x="40" y="645" font-size="10" fill="#8b949e" font-weight="600" letter-spacing="1">PRESENTATION LAYER</text>

  <!-- Dashboard box -->
  <rect x="40" y="655" width="1060" height="110" rx="10" fill="#161b22" stroke="#3fb950" stroke-width="2"/>
  <text x="570" y="678" text-anchor="middle" font-size="13" font-weight="700" fill="#3fb950">Live Dashboard â€” Netlify Static Hosting</text>

  <!-- index.html -->
  <rect x="60" y="692" width="240" height="55" rx="6" fill="#21262d" stroke="#3fb950" stroke-width="1"/>
  <text x="180" y="712" text-anchor="middle" font-size="10" font-weight="600" fill="#3fb950">index.html â€” Dashboard</text>
  <text x="180" y="724" text-anchor="middle" font-size="8" fill="#8b949e">Signals Â· Momentum Â· Fundamentals tabs</text>
  <text x="180" y="736" text-anchor="middle" font-size="8" fill="#8b949e">Thesis Breaker alerts Â· Auto-refresh 60s</text>

  <!-- history.html -->
  <rect x="320" y="692" width="240" height="55" rx="6" fill="#21262d" stroke="#39d2c0" stroke-width="1"/>
  <text x="440" y="712" text-anchor="middle" font-size="10" font-weight="600" fill="#39d2c0">history.html â€” Changes</text>
  <text x="440" y="724" text-anchor="middle" font-size="8" fill="#8b949e">Timeline Â· Signal flips Â· Snapshot viewer</text>
  <text x="440" y="736" text-anchor="middle" font-size="8" fill="#8b949e">Signals Â· Momentum Â· Fundamentals tabs</text>

  <!-- architecture.html -->
  <rect x="580" y="692" width="240" height="55" rx="6" fill="#21262d" stroke="#bc8cff" stroke-width="1"/>
  <text x="700" y="712" text-anchor="middle" font-size="10" font-weight="600" fill="#bc8cff">architecture.html</text>
  <text x="700" y="724" text-anchor="middle" font-size="8" fill="#8b949e">This page â€” system overview</text>
  <text x="700" y="736" text-anchor="middle" font-size="8" fill="#8b949e">Component diagram + data flow</text>

  <!-- Runner -->
  <rect x="840" y="692" width="240" height="55" rx="6" fill="#21262d" stroke="#d29922" stroke-width="1"/>
  <text x="960" y="712" text-anchor="middle" font-size="10" font-weight="600" fill="#d29922">run_pipeline.sh</text>
  <text x="960" y="724" text-anchor="middle" font-size="8" fill="#8b949e">Single run Â· --loop (15min) Â· --serve</text>
  <text x="960" y="736" text-anchor="middle" font-size="8" fill="#8b949e">Cron: */15 9-16 * * 1-5</text>

  <!-- ========== LAYER 5: Deployment ========== -->
  <text x="40" y="790" font-size="10" fill="#8b949e" font-weight="600" letter-spacing="1">DEPLOYMENT</text>

  <rect x="40" y="795" width="160" height="20" rx="4" fill="#21262d" stroke="#3fb950" stroke-width="1"/>
  <text x="120" y="809" text-anchor="middle" font-size="9" font-weight="600" fill="#3fb950">Netlify CDN</text>

  <rect x="220" y="795" width="160" height="20" rx="4" fill="#21262d" stroke="#f0883e" stroke-width="1"/>
  <text x="300" y="809" text-anchor="middle" font-size="9" font-weight="600" fill="#f0883e">Python 3.10+</text>

  <rect x="400" y="795" width="160" height="20" rx="4" fill="#21262d" stroke="#58a6ff" stroke-width="1"/>
  <text x="480" y="809" text-anchor="middle" font-size="9" font-weight="600" fill="#58a6ff">yfinance + pandas + numpy</text>

  <rect x="580" y="795" width="120" height="20" rx="4" fill="#21262d" stroke="#d29922" stroke-width="1"/>
  <text x="640" y="809" text-anchor="middle" font-size="9" font-weight="600" fill="#d29922">$0/month</text>

  <rect x="720" y="795" width="140" height="20" rx="4" fill="#21262d" stroke="#bc8cff" stroke-width="1"/>
  <text x="790" y="809" text-anchor="middle" font-size="9" font-weight="600" fill="#bc8cff">No backend server</text>

  <rect x="880" y="795" width="220" height="20" rx="4" fill="#21262d" stroke="#39d2c0" stroke-width="1"/>
  <text x="990" y="809" text-anchor="middle" font-size="9" font-weight="600" fill="#39d2c0">marketsignalagent.netlify.app</text>

</svg>

<!-- Legend -->
<div class="legend">
  <div class="legend-item"><div class="legend-color" style="background:#f0883e"></div>Data Ingestion</div>
  <div class="legend-item"><div class="legend-color" style="background:#58a6ff"></div>Signal Engine</div>
  <div class="legend-item"><div class="legend-color" style="background:#3fb950"></div>Dashboard / Output</div>
  <div class="legend-item"><div class="legend-color" style="background:#39d2c0"></div>History Tracking</div>
  <div class="legend-item"><div class="legend-color" style="background:#f85149"></div>Thesis Breaker</div>
  <div class="legend-item"><div class="legend-color" style="background:#bc8cff"></div>GICS Classification</div>
  <div class="legend-item"><div class="legend-color" style="background:#f778ba"></div>Fundamentals</div>
  <div class="legend-item"><div class="legend-color" style="background:#d29922"></div>Scoring / Runner</div>
</div>

<!-- Component Details -->
<h2 style="font-size:18px; margin-bottom:16px;">Component Details</h2>
<div class="components">
  <div class="comp">
    <h3><div class="icon" style="background:#58a6ff">SE</div>Signal Engine</h3>
    <p>Core pipeline â€” fetches 73 stock tickers + 6 macro proxies from Yahoo Finance. Computes RSI(14), MACD(12,26,9), 20/50/200-day MAs, volume trends. Generates composite score (0-100) per stock and group-level signal. Fetches fundamentals (P/E, EPS, margins, beta, analyst targets). Runs thesis-breaker condition checks against macro data.</p>
    <div class="file">signal_engine.py</div>
    <div class="tech"><span class="tag">Python</span><span class="tag">yfinance</span><span class="tag">pandas</span><span class="tag">numpy</span></div>
  </div>
  <div class="comp">
    <h3><div class="icon" style="background:#39d2c0">HM</div>History Manager</h3>
    <p>Compares current signals.json against previous snapshot. Detects: signal flips (buyâ†’sell), group signal changes, ticker adds/removes, group adds/removes, significant score changes (>10pts), rank changes. Saves timestamped snapshots for full state recovery. Maintains running change log with severity levels.</p>
    <div class="file">history_manager.py</div>
    <div class="tech"><span class="tag">Python</span><span class="tag">JSON diff</span><span class="tag">Snapshots</span></div>
  </div>
  <div class="comp">
    <h3><div class="icon" style="background:#3fb950">DB</div>Live Dashboard</h3>
    <p>Single-page HTML dashboard reading signals.json. Three tabs per group: Signals & Technicals, Momentum, Fundamentals. Color-coded thesis-breaker alerts with expandable condition panel. Filter by signal type or breaker status. Sortable columns. Auto-refresh every 60 seconds. Search by ticker or group name.</p>
    <div class="file">public/index.html</div>
    <div class="tech"><span class="tag">HTML</span><span class="tag">CSS</span><span class="tag">Vanilla JS</span><span class="tag">fetch()</span></div>
  </div>
  <div class="comp">
    <h3><div class="icon" style="background:#39d2c0">CH</div>History & Changes</h3>
    <p>Timeline view of all signal changes, ordered by recency. Filter by change type (signal flips, group changes, ticker adds/removes). Snapshot viewer with full past-state data across three tabs. Click any snapshot card to inspect the full state at that point in time.</p>
    <div class="file">public/history.html</div>
    <div class="tech"><span class="tag">HTML</span><span class="tag">Modal viewer</span><span class="tag">Tabbed UI</span></div>
  </div>
  <div class="comp">
    <h3><div class="icon" style="background:#f85149">TB</div>Thesis Breaker Monitor</h3>
    <p>Programmatic condition checks per sub-industry using macro proxy ETFs. Checks include: S&P drawdown >10%, group RSI <40, majority below MA50, YTD turning negative, gold/oil/USD threshold breaches, energy cost spikes, breadth collapse. Four severity levels: CLEAR â†’ WATCH â†’ WARNING â†’ CRITICAL.</p>
    <div class="file">signal_engine.py â†’ check_thesis_breakers()</div>
    <div class="tech"><span class="tag">GLD</span><span class="tag">UUP</span><span class="tag">USO</span><span class="tag">UNG</span><span class="tag">XLE</span><span class="tag">^GSPC</span></div>
  </div>
  <div class="comp">
    <h3><div class="icon" style="background:#d29922">RP</div>Pipeline Runner</h3>
    <p>Bash orchestrator with three modes: single run, loop (every 15 min during market hours), and serve (run + local HTTP server on port 8080). Designed for cron scheduling on local machine or VPS. Executes signal_engine.py then history_manager.py sequentially.</p>
    <div class="file">run_pipeline.sh</div>
    <div class="tech"><span class="tag">Bash</span><span class="tag">Cron</span><span class="tag">http.server</span></div>
  </div>
</div>

<!-- Data flow -->
<h2 style="font-size:18px; margin: 32px 0 16px;">Data Flow</h2>
<div style="background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:20px;font-size:13px;color:var(--dim);line-height:2;">
  <span style="color:var(--orange)">Yahoo Finance</span> â†’ <span style="color:var(--blue)">fetch_data()</span> â†’ 6mo OHLCV for 73 tickers + 6 macro proxies<br>
  <span style="color:var(--pink)">yfinance .info</span> â†’ <span style="color:var(--blue)">fetch_fundamentals()</span> â†’ P/E, EPS, margins, beta, analyst targets for each ticker<br>
  OHLCV â†’ <span style="color:var(--blue)">compute_rsi() Â· compute_macd() Â· compute_moving_averages()</span> â†’ technical indicators<br>
  OHLCV â†’ <span style="color:var(--green)">compute_momentum_metrics()</span> â†’ 1M/3M returns, 52W high/low, RS vs MA50, trend strength<br>
  Indicators + Momentum â†’ <span style="color:var(--yellow)">score_stock()</span> â†’ composite 0-100 score â†’ signal (strong-buy to strong-sell)<br>
  Macro data â†’ <span style="color:var(--red)">check_thesis_breakers()</span> â†’ per-group severity (clear/watch/warning/critical)<br>
  All outputs â†’ <span style="color:var(--blue)">signals.json</span> â†’ copied to <span style="color:var(--green)">public/</span><br>
  signals.json â†’ <span style="color:var(--cyan)">history_manager.py</span> â†’ diff vs previous â†’ <span style="color:var(--cyan)">history.json</span> + <span style="color:var(--cyan)">snapshots/</span><br>
  <span style="color:var(--green)">index.html</span> fetches signals.json â†’ renders 3-tab dashboard with breaker alerts<br>
  <span style="color:var(--cyan)">history.html</span> fetches history.json â†’ renders timeline + snapshot viewer
</div>

</div>
</body>
</html>
